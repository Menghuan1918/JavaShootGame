package com.example.airplaneshoot;

import javafx.scene.Scene;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.stage.Modality;
import javafx.stage.Stage;

import java.net.URL;
import java.util.Collections;
import java.util.Objects;

public class CardSelect {
    public static void ShowCard() {
        // Change the Player data-------------------------------------------------------------------------------------------
        if (Store.Level < 5)
            Store.Level += 0.3f;
        if (Store.Level % 0.5 == 0)
            Store.PlayerLevel += 1;
        Store.EnemyHP += Store.Level * 0.3f;
        AirplaneGame.KON("/Music/GetCard.wav");
        // Add the card select scene----------------------------------------------------------------------------------------
        URL mediaUrl = CardSelect.class.getResource("/Pictures/CardHead.png");
        Image mediaImage = new Image(Objects.requireNonNull(mediaUrl).toString());
        ImageView mediaImageView = new ImageView(mediaImage);
        VBox head = new VBox();
        head.getChildren().add(mediaImageView);
        Stage stage = new Stage();
        HBox root = new HBox();
        // Random the card list---------------------------------------------------------------------------------------------
        for (int i = 0; i < 3; i++) {
            root.getChildren().add(CreateCard(Store.CardList.get(i)));
        }
        Collections.shuffle(Store.CardList);
        head.getChildren().add(root);
        stage.setScene(new Scene(head));
        stage.initModality(Modality.APPLICATION_MODAL);
        stage.setTitle("Card Select");
        stage.showAndWait();
    }

    private static ImageView CreateCard(String CardName) {
        Image CardImage = new Image(CardName);
        ImageView CardImageView = new ImageView(CardImage);
        CardImageView.setOnMouseClicked(event -> {
            handleImageClick(CardName);
            ((Stage) ((ImageView) event.getSource()).getScene().getWindow()).close();
        });
        return CardImageView;
    }

    private static void handleImageClick(String CardName) {
        if (CardName.startsWith("file:")) {
            CardName = CardName.substring(CardName.indexOf("/Pictures/"));
        }
        switch (CardName) {
            case "/Pictures/Card1.png":
                // K-ON!
                /*
                                           .-+*******-.:++++:.        -----------==--------
                          -*+++++++++++*+++++++*=.     -----------==--------
                        =*+++*####*+++++++++++++++*:   -----------==--------
                      -*++*#########+++++++++++++++**:.-----------==--------
                    .+*++*###########+++++++++++++++++*----------===--------
                   -*+++*###**+++++++++++++++++++++++++*+---------==--------
                  =*+++*##*++++++++++++++++++++++++++++++*=-------==--------
                 =*+++*#*+++++++++++++++++++++++++++++++++*+------==--------
                =++++**+*++++++++++++++++++++++++++++++++++**-----==--------
               =*++++*+*+++++++++++++++++++++++++++++++++++++*----=---------
              -*+++++++#+++++++++++++++++++++++++++++++++++++*+---=---------
             :*++**++++*++++++++++++++++++++++++++++++++++++++*+------------
            .*+++*++++*++++++*+++++++++++++++++++++++++++++++++*=-=---------
            ++++*+++++#+++++++*+++++++++++++++++++++++++++++++++*=----------
           =+++*++++++*+++++++*++++++++++++++++++++++++++++++++++*----------
          .*++**++++++*++++++++*+++++++++++++++++++++++++++++++++*=---------
          *+++*++++++*+++++++++*++++++++++++++++*+++++++++++++++++#=--------
         =+++*+++++++#++++++++++++++++++++++++++*+++++++++*+++++++++--------
        :++++*+++++++#+++++++++++++++++++++++++++#++++++++*++++++++*--------
        *+++#++++++++#+++++++++++++++*+++++++++++**++++++++*+++++++++-------
       -*++**++++++*+*+++++++++++++++#++++++++++++%*+++++++*++++++++#-------
       *+++=:++++++*+*+++++++++++++++*++++++++++++%#*+++++++*++++++++=------
      =*++*=::-+++*+**++++++++++++++++*+++++++++++###+++++++#++++++++#------
.     *+++#*+:::****=*++++++++++++++++#+++++++++++*##*++++++*++++++++*------
.=.  =++++*++*-.:**=:#+++++++++++++++++*+++++++++++%##+++++++*+++++++++-----
..:=.++++*++++*=-*=::*+++++++++++++++++*+++++++++++###*++++++#++++++++*-----
....+++++#+++++*#+:..*+++*+++++++++++++++++++++++++*###++++++#++++++++*=----
....*++++*+++++**:...*+++#+++++++++++++++++++++++++*###++++++*+++++++++=----
....*++#**+++++#.....*++**+++++++++#*+++++++++++++++###+++++++*++++++++*----
...=+++**+*+++*:..:..+++#-+++++++++==*+++*++++++++++%##*++++++*++++++++@----
...#++*++:-++++....=.=++*:*++++++++*.:**+*++++++++++%##*++++++#++++++++%----
:..*++#+#-.:+*:.....:.*++.*++++++++*...=**++++++++++####++++++#++++++++*=---
:.-+++#+#*+::+......-:*+-.-++++++++*.....+*+++++++++#*##++++++#++++++++*+---
.-#+++*+#+++-=.......=#*:..*+++++++*.....**+++++++++#*##++++++#++++++++**---
..#+++++*+++*:........**...=+++++++*....*=.*++++++++#+##++++++%++++++++**---
..+++*++*+++*..........*+...*++++++*..:++..+++++++++*+**++++++%++++++++*+---
.:+++#++*+++=..........#=-..++++++++.:=-...:++++++++*+**++++++%+++++++++=---
.=+++#++*+++:..........#.....*+++++-........++++++++*+**++++++#*++++++++=---
.*+++#++#++*:..........-.....-+++++:.........*+++++*+++*++++++**+++++++=----
.*+++*++#++#:..-...=#*:.......++++*..........=+++++#++++++++++*#+++++++=-=--
.*+++*++#++*:...#+%%%%@=.......+++*...........*++++#*++++++++*+#++++++*--=--
.*+++*++*++*-.. +%+.#@@%:......:*++...........:*+++%*++++++++#+#++++++*--+--
.#+++*+++**++.-*@: .%@@@*.......-*:...........:=*+*##++++++++#+%++++++*--+--
.#+++++++##+#..++  :%@@@%........-.........=%%*:=*###++++++++*+#*+*+++*--+--
.#+++++++*#+%..*:  :%@@@@................=%%#: ..=%##++++++***+##++*++#--+--
.*+++*++++#+%.-%.  :*%@@@:..............+@%-......%##+++++**#++*#++#++*--*--
.#+++*++++++#-.--    +@@@-.............-@%-.. ....%##++++**++++*#*+#++*--*--
.*+++*++++++#+..*  .*=@@@-.............*%%%%%#-...###+++**+++++*##+#++*--*--
.++++*+++++*##...  .@%@@@-................:-*#%+.:###++**++++++*##+*++*--*--
.-+++#+++++*#%....  %%@@@......................---###+**+++++++*##**++#--*--
.-+++#+++++*#%-.... -%%%-........................=###**++++++++*##**++#--+--
.=*++#+++++*#%+............................::::::*##%*+++++++++*##*#++#--+--
.=#++*++++++##-:::::::...................::::::::####++++++++++*####++#--+--
:.*++*++++++#-:::::::::..................::::::::####++++++++++*####++#--=--
+ -+**++++++#--::::::::..................::::::::%##*++++++++++#####++#-----
: .*=+++++++#+:::::::::....................::::::%##+++++++++++####*++#-----
   -.+++++++###:........................:.....:::%#++++++++++++%###*++#-----
    .+++++++###.......................:+++.......#+++++++++++++####+++#-----
     +++++++###.......................*====.....-+++++++++++++#####+++#-----
     +++++++##%......................:===+-.....*++++++++++++######+++#-----
     +++++++*#%=.....................+==++.....-++++++++++++######+*++#-----
     *++++++*###.....................#++:......*+++++++++++#######-+++#-----
     *+++++++#%#=...........:=:....:=+........-+++++++++++#######+-=*+#-----
     *+++++++####=.............:::............*++++++++++#######%----*#-----
     *+++++++#####*..........................:++++++++++#########----+#-::::
     =+++++++*######=........................++++++++++*-:=#####=-----+:::::
.    :++++++++########=.....................:*++++++++*:   =####-------::-::
+    .++++++++##########+.................:=+++++++++*:    .###=------:::-::
=.    ++++++++############=.............-=--*++++++++=      +%*==------:::::
=+    *+++++++*####*#####:==-........:=#----*+*--*++*        *===-----------
==.   +++=+*+++#### +=##*----===-=++--+---:-+*:  *+*.        -==---------===
--+   :++. ++++###=.:  .:=-----=-::-+=--:. +*:   -+-          *=---------===
--=:   **   +++###.-     +------=-=+---:.  #:    .+           =-----------==
---+   +*    ++*## =     +-----==+---:.   .%                  .=------------
---=-  :+     -*#= :     -:--=+==*--.     -#                   +------------
*/
                Store.PlayerHP += 1;
                Store.ShootDamage += 0.5f;
                AirplaneGame.musicPlay("/Music/轻飘飘时间.mp3");
                break;
            case "/Pictures/Card2.png":
                Store.PlayerHP += 2;
                Store.ShootDamage += 0.25f;
                Store.ShootFrequency += 1;
                break;
            case "/Pictures/Card3.png":
                Store.PlayerHP += 1;
                Store.ShootFrequency += 1;
                Store.PlayerSpeed += Math.round(Store.PlayerSpeed * 0.20f);
                break;
            case "/Pictures/Card4.png":
                Store.PlayerHP += 1;
                Store.ShootFrequency += 1;
                Store.PlayerSpeed += Math.round(Store.PlayerSpeed * 0.20f);
                break;
            case "/Pictures/Card5.png":
                Store.PlayerHP += 5;
                break;
            case "/Pictures/Card6.png":
                Store.PlayerHP += 1;
                Store.ShootDamage += 1;
                Store.PlayerSpeed -= Math.round(Store.PlayerSpeed * 0.20f);
                break;
            case "/Pictures/Card7.png":
                Store.ShootDamage += 1.5f;
                AirplaneGame.musicPlay("/Music/春日影.mp3");
                break;
            case "/Pictures/Card8.png":
                Store.PlayerHP += 3;
                Store.ShootDamage -= 0.2f;
                Store.PlayerSpeed += Math.round(Store.PlayerSpeed * 0.50f);
                break;
            case "/Pictures/Card9.png":
                Store.PlayerHP += 1;
                Store.ShootDamage += 0.2f;
                Store.ShootFrequency += 2;
                break;
        }
    }
}
